<section id="droit-legal" class="droit-legal">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">{{ section.settings.title }}</h2>
      <div class="section-subtitle">{{ section.settings.subtitle }}</div>
    </div>
    
    <div class="legal-partnership legal-partnership-hidden">
      <div class="partnership-content">
        <div class="partnership-icon">
          <i class="fas fa-balance-scale"></i>
        </div>
        <h3>{{ section.settings.partnership_title }}</h3>
        <p>{{ section.settings.partnership_description }}</p>
        
        {% if section.blocks.size > 0 %}
          <div class="legal-services">
            {% for block in section.blocks %}
              <div class="legal-service legal-service-hidden">
                <div class="service-icon-small">
                  <i class="{{ block.settings.icon }}"></i>
                </div>
                <div class="service-content">
                  <h4>{{ block.settings.title }}</h4>
                  <p>{{ block.settings.description }}</p>
                </div>
              </div>
            {% endfor %}
          </div>
        {% endif %}
        
        {% if section.settings.note != blank %}
          <div class="legal-note">
            <i class="fas fa-shield-alt"></i>
            <div>
              <strong>{{ section.settings.note_title | default: 'Solution tripartite claire' }}</strong>
              <p>{{ section.settings.note }}</p>
            </div>
          </div>
        {% endif %}
        
        {% if section.settings.button_label != blank %}
          <div class="legal-cta">
            <a href="{{ section.settings.button_link }}" class="legal-button">
              <i class="fas fa-gavel"></i>
              {{ section.settings.button_label }}
            </a>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

<style>
  .droit-legal {
    padding: 6rem 0 !important;
    background: linear-gradient(135deg, var(--light-bg) 0%, var(--gray-100) 50%, var(--light-bg) 100%) !important;
    position: relative !important;
  }
  .container {
    max-width: 1200px !important;
    margin: 0 auto !important;
    padding: 0 1.5rem !important;
  }
  .section-header {
    text-align: center !important;
    margin-bottom: 4rem !important;
  }
  .section-title {
    font-size: 3.5rem !important;
    font-weight: 700 !important;
    margin-bottom: 1.5rem !important;
    color: var(--text-primary) !important;
    background: linear-gradient(135deg, var(--text-primary) 0%, var(--primary-color) 100%) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
  }
  .section-subtitle {
    font-size: 1.2rem !important;
    color: var(--text-secondary) !important;
    max-width: 600px !important;
    margin: 0 auto !important;
    line-height: 1.7 !important;
  }
  .legal-partnership {
    background: var(--white) !important;
    border-radius: 24px !important;
    padding: 3rem !important;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1) !important;
    border: 1px solid rgba(37, 99, 235, 0.1) !important;
    position: relative !important;
    overflow: hidden !important;
    opacity: 1 !important;
    transform: none !important;
  }
  .legal-partnership::before {
    content: '';
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    height: 6px !important;
    background: var(--gradient-primary) !important;
  }
  .partnership-content {
    text-align: center !important;
  }
  .partnership-icon {
    width: 100px !important;
    height: 100px !important;
    background: var(--gradient-primary) !important;
    border-radius: 24px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    margin: 0 auto 2rem !important;
    color: var(--white) !important;
    font-size: 2.5rem !important;
    box-shadow: 0 15px 40px rgba(37, 99, 235, 0.3) !important;
  }
  .partnership-content h3 {
    font-size: 2.2rem !important;
    font-weight: 600 !important;
    color: var(--text-primary) !important;
    margin-bottom: 1.5rem !important;
  }
  .partnership-content > p {
    font-size: 1.1rem !important;
    color: var(--text-secondary) !important;
    line-height: 1.7 !important;
    margin-bottom: 3rem !important;
    max-width: 800px !important;
    margin-left: auto !important;
    margin-right: auto !important;
  }
  .legal-services {
    display: grid !important;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)) !important;
    gap: 2rem !important;
    margin-bottom: 3rem !important;
    text-align: left !important;
  }
  .legal-service {
    background: var(--light-bg) !important;
    border-radius: 16px !important;
    padding: 1.5rem !important;
    border: 1px solid var(--gray-200) !important;
    display: flex !important;
    align-items: flex-start !important;
    gap: 1rem !important;
    transition: all 0.3s ease !important;
    opacity: 1 !important;
    transform: none !important;
  }
  .legal-service:hover {
    background: var(--gray-50) !important;
    border-color: var(--primary-color) !important;
    transform: translateY(-2px) !important;
  }
  .service-icon-small {
    width: 50px !important;
    height: 50px !important;
    background: var(--gradient-primary) !important;
    border-radius: 12px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    color: var(--white) !important;
    font-size: 1.2rem !important;
    flex-shrink: 0 !important;
  }
  .service-content h4 {
    font-size: 1.2rem !important;
    font-weight: 600 !important;
    color: var(--text-primary) !important;
    margin-bottom: 0.5rem !important;
  }
  .service-content p {
    color: var(--text-secondary) !important;
    line-height: 1.5 !important;
    margin: 0 !important;
  }
  .legal-note {
    background: rgba(37, 99, 235, 0.1) !important;
    border: 2px solid rgba(37, 99, 235, 0.2) !important;
    border-radius: 16px !important;
    padding: 2rem !important;
    margin: 3rem 0 !important;
    display: flex !important;
    align-items: flex-start !important;
    gap: 1rem !important;
    text-align: left !important;
  }
  .legal-note i {
    color: var(--primary-color) !important;
    font-size: 1.5rem !important;
    margin-top: 0.2rem !important;
    flex-shrink: 0 !important;
  }
  .legal-note strong {
    color: var(--primary-color) !important;
    font-size: 1.1rem !important;
    display: block !important;
    margin-bottom: 0.5rem !important;
  }
  .legal-note p {
    color: var(--text-primary) !important;
    line-height: 1.6 !important;
    margin: 0 !important;
  }
  .legal-cta {
    margin-top: 2rem !important;
  }
  .legal-button {
    background: var(--gradient-primary) !important;
    color: var(--white) !important;
    padding: 1.2rem 2.5rem !important;
    border-radius: 50px !important;
    text-decoration: none !important;
    font-weight: 600 !important;
    display: inline-flex !important;
    align-items: center !important;
    gap: 0.5rem !important;
    box-shadow: 0 10px 30px rgba(37, 99, 235, 0.3) !important;
    transition: all 0.3s ease !important;
  }
  .legal-button:hover {
    transform: translateY(-3px) !important;
    box-shadow: 0 15px 40px rgba(37, 99, 235, 0.4) !important;
  }
  
  /* Animation classes */
  .legal-partnership-hidden {
    opacity: 0 !important;
    transform: translateY(40px) !important;
    transition: opacity 0.8s cubic-bezier(0.22, 1, 0.36, 1), transform 0.8s cubic-bezier(0.22, 1, 0.36, 1) !important;
  }
  .legal-partnership-visible {
    opacity: 1 !important;
    transform: translateY(0) !important;
  }
  .legal-service-hidden {
    opacity: 0 !important;
    transform: translateY(30px) !important;
    transition: opacity 0.6s cubic-bezier(0.22, 1, 0.36, 1), transform 0.6s cubic-bezier(0.22, 1, 0.36, 1) !important;
  }
  .legal-service-visible {
    opacity: 1 !important;
    transform: translateY(0) !important;
  }
  
  @media (max-width: 768px) {
    .legal-services {
      grid-template-columns: 1fr !important;
    }
    .section-title {
      font-size: 2.5rem !important;
    }
    .legal-partnership {
      padding: 2rem !important;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const partnership = document.querySelector('.legal-partnership-hidden');
    const services = document.querySelectorAll('.legal-service-hidden');
    
    const revealOnScroll = () => {
      const triggerBottom = window.innerHeight * 0.85;
      
      // Animate partnership container
      if (partnership) {
        const partnershipTop = partnership.getBoundingClientRect().top;
        if (partnershipTop < triggerBottom) {
          partnership.classList.add('legal-partnership-visible');
        }
      }
      
      // Animate services with stagger
      services.forEach((service, index) => {
        const serviceTop = service.getBoundingClientRect().top;
        if (serviceTop < triggerBottom) {
          setTimeout(() => {
            service.classList.add('legal-service-visible');
          }, index * 150); // Stagger animation
        }
      });
    };
    
    window.addEventListener('scroll', revealOnScroll);
    revealOnScroll();
  });
</script>

{% schema %}
{
  "name": "Droit Étrangers - Legal",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "default": "Services Juridiques Partenaires",
      "label": "Titre de la section"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "default": "Pour les aspects juridiques complexes, nous collaborons avec des avocats spécialisés.",
      "label": "Sous-titre"
    },
    {
      "type": "text",
      "id": "partnership_title",
      "default": "Accompagnement Juridique Sécurisé",
      "label": "Titre du partenariat"
    },
    {
      "type": "textarea",
      "id": "partnership_description",
      "default": "En cas de difficulté, nous proposons une convention tripartite transparente entre vous, notre cabinet, et un avocat partenaire. Vous bénéficiez ainsi d'un accompagnement administratif complet ET d'un suivi juridique professionnel sécurisé.",
      "label": "Description du partenariat"
    },
    {
      "type": "text",
      "id": "note_title",
      "default": "Solution tripartite claire",
      "label": "Titre de la note"
    },
    {
      "type": "textarea",
      "id": "note",
      "default": "Transparence sur nos rôles : nous ne faisons pas de conseil juridique. Notre réseau d'avocats partenaires est compétent et réactif, vous garantissant un gain de temps et de sérénité.",
      "label": "Note explicative"
    },
    {
      "type": "text",
      "id": "button_label",
      "default": "Consultation Juridique",
      "label": "Texte du bouton"
    },
    {
      "type": "url",
      "id": "button_link",
      "default": "#contact",
      "label": "Lien du bouton"
    }
  ],
  "blocks": [
    {
      "type": "legal_service",
      "name": "Service Juridique",
      "settings": [
        {
          "type": "text",
          "id": "icon",
          "default": "fas fa-file-signature",
          "label": "Classe d'icône (FontAwesome)"
        },
        {
          "type": "text",
          "id": "title",
          "default": "Recours et contentieux",
          "label": "Titre du service"
        },
        {
          "type": "textarea",
          "id": "description",
          "default": "Recours gracieux, hiérarchique ou contentieux en cas de refus ou OQTF.",
          "label": "Description"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Droit Étrangers - Legal",
      "category": "Custom",
      "blocks": [
        {
          "type": "legal_service",
          "settings": {
            "icon": "fas fa-file-signature",
            "title": "Recours et contentieux",
            "description": "Recours gracieux, hiérarchique ou contentieux en cas de refus ou OQTF."
          }
        },
        {
          "type": "legal_service",
          "settings": {
            "icon": "fas fa-pen",
            "title": "Rédaction juridique",
            "description": "Rédaction de courriers à valeur juridique et documents officiels."
          }
        },
        {
          "type": "legal_service",
          "settings": {
            "icon": "fas fa-university",
            "title": "Suivi judiciaire",
            "description": "Suivi des procédures devant les juridictions administratives."
          }
        },
        {
          "type": "legal_service",
          "settings": {
            "icon": "fas fa-lightbulb",
            "title": "Conseil stratégique",
            "description": "Conseil stratégique sur le type de titre à solliciter selon votre situation."
          }
        }
      ]
    }
  ]
}
{% endschema %} 